<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.png" type="image/png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Preconnect to font providers for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- (intentionally no image preloads/prefetches to avoid unused-preload warnings on non-home routes) -->
    
    <title>Allure Her - Luxury Christian Women&#39;s Fashion | Loved. Seen. Enough.</title>
    <meta name="description" content="Discover luxury Christian women's fashion that honors both style and faith. Versatile sets from church to casual luxury. Loved. Seen. Enough.">
    <meta name="author" content="Allure Her" />
    <meta name="keywords" content="Christian fashion, modest clothing, luxury women's clothing, faith-based fashion, church outfits, modest luxury">

    <!-- Async font loading to prevent render blocking -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap"></noscript>

    <meta property="og:title" content="Allure Her - Luxury Christian Women's Fashion" />
    <meta property="og:description" content="Where faith meets fashion in timeless elegance. Loved. Seen. Enough." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://storage.googleapis.com/gpt-engineer-file-uploads/kSfVccVICheEYTiUeGqKXXogcU62/social-images/social-1758120784597-allureher.jpeg">

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="https://storage.googleapis.com/gpt-engineer-file-uploads/kSfVccVICheEYTiUeGqKXXogcU62/social-images/social-1758120784597-allureher.jpeg">
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Analytics tracking with session/visitor IDs and reload detection -->
    <script>
(function(){
  const SITE_ID = "my-site";
  // Use your own origin (first-party) so fewer blockers drop it:
  const ORIGIN = location.origin; // e.g., https://shopallureher.com

  function uuid(){
    if (crypto.randomUUID) return crypto.randomUUID();
    return (Date.now().toString(36)+Math.random().toString(36).slice(2));
  }

  // cookies
  function getCookie(name){
    return document.cookie.split('; ').find(r=>r.startsWith(name+'='))?.split('=')[1];
  }
  function setCookie(name, val, seconds){
    const d = new Date(); d.setTime(d.getTime() + seconds*1000);
    document.cookie = `${name}=${val}; path=/; expires=${d.toUTCString()}; SameSite=Lax`;
  }

  // ensure vid (1 year) and sid (sliding 30 min)
  let vid = getCookie('vid'); if (!vid){ vid = uuid(); setCookie('vid', vid, 365*24*3600); }
  function refreshSid(){
    let sid = getCookie('sid');
    if (!sid) sid = uuid();
    setCookie('sid', sid, 30*60); // 30 minutes sliding window
    return sid;
  }

  // detect reload (Navigation Timing Level 2)
  function getNavType(){
    try {
      const nav = performance.getEntriesByType('navigation')[0];
      if (nav && nav.type) return nav.type;           // 'navigate' | 'reload' | 'back_forward' | 'prerender'
    } catch {}
    // legacy fallback
    const pn = performance.navigation || {};
    if (pn.type === 1) return 'reload';
    if (pn.type === 2) return 'back_forward';
    return 'navigate';
  }

  // prevent duplicate fires on the same path within a session (defense-in-depth)
  function sentKey(sid, path){ return `pv:${sid}:${path}`; }

  function sendVisit(){
    const navType = getNavType();
    if (navType === 'reload') return; // <-- Skip counting refreshes

    const sid = refreshSid();
    const key = sentKey(sid, location.pathname);
    if (sessionStorage.getItem(key)) return; // already sent for this path in this session
    sessionStorage.setItem(key, '1');

    const payload = {
      siteId: SITE_ID,
      path: location.pathname,
      ref: document.referrer || null,
      navType,
      sid,
      vid,
      eventId: uuid(),
      ts: new Date().toISOString()
    };
    const blob = new Blob([JSON.stringify(payload)], {type:'application/json'});

    if (navigator.sendBeacon) {
      navigator.sendBeacon(ORIGIN + "/analytics/visit", blob);
    } else {
      // keepalive to survive quick navigations
      fetch(ORIGIN + "/analytics/visit", {
        method:"POST",
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload),
        keepalive:true
      }).catch(()=>{});
    }
  }

  // initial page load
  sendVisit();

  // SPA route changes (pushState / back-forward)
  (function(history){
    const push = history.pushState;
    history.pushState = function(){
      const r = push.apply(this, arguments);
      setTimeout(sendVisit, 0);
      return r;
    };
  })(window.history);
  window.addEventListener('popstate', ()=> setTimeout(sendVisit, 0));
})();
    </script>
  </body>
</html>
